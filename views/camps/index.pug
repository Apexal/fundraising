extends /layout

block content
    .row
        .col-xs-12
            .jumbotron.clearfix
                h1 Camps
                    small.right #{camps.length} total
                p= helpers.getHelpInfo('camps')
                a.btn.btn-primary.right(href="#camps") All Camps
        hr
    if user.admin
        include schedulecamp

    .row
        .col-xs-12
            .page-header
                h1 Active Camps
                    +help('active-camps')
                    small.right #{activeCamps.length} total
    
        if activeCamps.length > 0
            each c in activeCamps
                .col-xs-12.col-md-6.col-lg-4
                    .panel.camp-panel(class=(c.ongoing ? 'panel-success' : 'panel-primary'), data-camp-status=(c.ongoing ? 'ongoing' : 'future'))
                        .panel-heading
                            if c.ongoing
                                span.text-muted.right Ends #{moment(c.endDate).fromNow()}
                            else
                                span.text-muted.right Starts #{moment(c.startDate).fromNow()}
                            h1.panel-title(title=c.location.address)
                                if c.ongoing
                                    b Ongoing at 
                                | #{c.location.name}
                        .panel-body
                            if c.ready
                                .rank-summary.clearfix
                                    .ambassador.col-xs-12.col-sm-5.col-md-12
                                        b Ambassador - 
                                        a(href='/users/' + c.ambassador.email)= c.ambassador.name.full
                                    .director.col-xs-12.col-sm-5.col-md-12
                                        b Program Director - 
                                        a(href='/users/' + c.director.email)= c.director.name.full
                                    .teachers.col-xs-12.col-sm-2.col-md-12
                                        b Teachers - 
                                        span #{c.teachers.length}
                            else
                                .alert.alert-warning #[b Missing Ranks] Join now on details page.
                            
                            if c.info
                                .well.well-sm
                                    b Camp Info
                                    p= helpers.limit(c.info, 50)
                        
                            a.btn.right(class=(c.ongoing ? 'btn-success' : 'btn-primary'), href="/camps/" + c._id) View Details
        else
            p.text-muted.text-center There are currently no #[b active camps].
    .row#camps
        .col-xs-12
            .page-header
                h2 Inactive Camps
                    +help('inactive-camps')
                    small.right #{inactiveCamps.length} total
        .col-xs-12
            if inactiveCamps.length > 0
                table.table.table-striped
                    thead
                        tr
                            th End Date
                            th Camp Location
                            th Info
                    tbody
                        each c in inactiveCamps
                            tr
                                th(title=moment(c.endDate).fromNow())= moment(c.endDate).format("MMMM Do YYYY")
                                td(title=c.location.address)= c.location.name
                                td= helpers.limit(c.info, 100)
                                td
                                    a.btn.btn-default(href="/camps/" + c._id) View Details
            else
                p.text-muted.text-center There are no #[b inactive camps].