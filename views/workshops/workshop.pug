extends /layout

block content
    .row
        .col-xs-12
            .page-header
                h1 
                    if !workshop.active
                        b(title="This workshop has ended.")
                            +icon('lock', 'Inactive ') 
                    span
                        if workshop.ongoing
                            b Ongoing 
                        | Workshop at 
                        b
                            a.location-name(href="/locations/" + workshop.location._id, title=workshop.location.address)= workshop.location.name
                    if workshop.ongoing
                        small.right Started 
                            b= moment(workshop.startDate).fromNow()
                    else if workshop.active
                        small.right Starting 
                            b= moment(workshop.startDate).fromNow()

    .row
        .col-xs-12
            .well.well-sm(class=(!workshop.active ? 'text-muted' : ''))
                h3.workshop-dates.text-center Running from 
                    b(title=moment(workshop.startDate).fromNow())= moment(workshop.startDate).format("dddd, MMMM Do YY")
                    |  to 
                    b(title=moment(workshop.endDate).fromNow())= moment(workshop.endDate).format("dddd, MMMM Do YY")
            hr
            if workshop.info.extra
                p= workshop.info.extra
                hr

    .row
        .col-xs-12
            ul.nav.nav-tabs
                li.active(role="presentation")
                    a(data-toggle="tab", href="#team") Team
                li(role="presentation")
                    a(data-toggle="tab", href="#info") Info

    .row.tab-content
        #team.col-xs-12.col-sm-6.tab-pane.fade.in.active
            include team
        #info.col-xs-12.col-sm-6.tab-pane.fade
            include info
        .col-xs-12.col-sm-6
            br
            if workshop.location.imageUrl
                a(href="/locations/" + workshop.location.id)
                    img.location-image.big.thumbnail(src=workshop.location.imageUrl, alt='Invalid url for location image!')
            
            .panel.panel-default
                .panel-body.text-center
                    b Contact Name 
                    span= workshop.info.contact.name
                    br
                    b Contact Info 
                    span= workshop.info.contact.contactInfo

    if workshop.active
        .row
            .col-xs-12.col-lg-5
                hr
                include fundraising/recentfunds

    .row
        .col-xs-12.actions
            hr
            a.btn.btn-info.right(class=(helpers.workshopRanksFilled(workshop) ? '' : 'disabled'), title=(helpers.workshopRanksFilled(workshop) ? 'View/Manage this workshop\'s finances.' : 'Fundraising is only available once all roles are filled.'), disabled=!helpers.workshopRanksFilled(workshop), href="/workshops/" + workshop._id + "/fundraising")= (user.admin ? "Manage" : "View") + " Fundraising"
            a.btn.btn-warning.right(class=(helpers.isHigherUpInWorkshop(workshop, user) && workshop.active ? '' : 'disabled'), href="/workshops/" + workshop._id + "/applicants") Review Applicants 
                span.badge= workshop.applicants.length
            if user.admin
                form(action="/workshops/" + workshop._id + "/delete", method="POST", onsubmit="return confirm('Are you sure you want to delete this workshop?');")
                    button.btn.btn-danger Delete Workshop
                    a.btn.btn-primary(href="/workshops/" + workshop._id + "/edit") Edit Workshop
