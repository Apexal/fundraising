extends /layout

block content
    .row
        .col-xs-12
            .jumbotron.clearfix
                h1 Locations
                    small.right #{locations.length} total
                p= helpers.getHelpInfo('locations')
                
                //- Only program directors, ambassadors, and admins of any rank can add new locations
                if user.rank != 'teacher' || user.admin
                    a.btn.btn-danger(href='/locations/new') New Location

                a.btn.btn-primary.right(href="/locations/list") All Locations
        hr
    .row
        .col-xs-12
            .page-header
                h1 Active Locations
                    +help('active-locations')
                    small.right #{activeLocations.length} total
        
        if activeLocations.length > 0
            each l in activeLocations
                .col-xs-12.col-md-6.col-lg-4
                    .panel.panel-primary
                        .panel-heading
                            span.right= l.address
                            h1.panel-title
                                a(href='/locations/' + l._id)= l.name
                        .panel-body
                            // Nasty I know
                            b Workshops 
                                small.text-muted (Starting Date) &nbsp;&nbsp;
                            each workshop in l.workshops
                                a.btn.btn-info(href='/workshops/' + workshop._id) #{moment(workshop.startDate).format('dddd, MMMM Do YY')}
                           
                        .panel-footer
                            a.btn.btn-primary(href="/locations/" + l._id) Location Overview
                            
        else
            p.text-muted.text-center There are no #[b active locations].

    .row#locations
        .col-xs-12
            .page-header
                h2 Inactive Locations
                    +help('inactive-locations')
                    small.right #{inactiveLocations.length} total
        .col-xs-12
            if inactiveLocations.length > 0
                table.table
                    thead
                        tr
                            th Name
                            th Address
                            th Description
                    tbody
                        each l in inactiveLocations
                            tr
                                td= l.name
                                td= l.address
                                if l.description
                                    td= helpers.limit(l.description, 50)
                                else
                                    td.text-muted No description given.
                                td
                                    a.btn.btn-default(href="/locations/" + l._id) Location Overview
            else
                p.text-muted.text-center There are no #[b locations].