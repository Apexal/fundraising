extends /layout

block content
    .row
        .col-xs-12
            .page-header
                h1 
                    if targetUser.admin
                        b Adminstrator
                    else
                        b= targetUser.rankName
                    |  #{targetUser.name.full}
                    small.text-muted.right(title=moment(targetUser.registeredDate).format("dddd, MMMM Do YYYY")) registered #{moment(targetUser.registeredDate).fromNow()}
    .row.user-info
        .col-xs-12.col-sm-5.col-md-4.col-lg-3.summary
            img.profilepicture.-large(src="/images/" + targetUser.profileImageName, alt=targetUser.name.first + "'s profile picture.'", title=targetUser.name.full)
            
        .col-xs-12.col-sm-7.col-md-8.col-lg-9.contact
            .panel.panel-default
                .panel-body
                    p.text-muted.text-center #[b= targetUser.age] years old in grade #[b= targetUser.grade] near #[b= targetUser.location]
                        br
                        b Phone #: 
                        span.phonenumber= targetUser.phoneNumber
                        br
                        a.email(href="mailto:" + targetUser.email)= targetUser.email

    .row
        .col-xs-12.col-sm-6.col-lg-5
            .page-header
                h2 Why Kids Tales?
            blockquote.why
                p= targetUser.application.why
                footer= targetUser.name.full
        .col-xs-12.col-sm-6.col-lg-7
                .page-header
                    h2 #{targetUser.rankName} Info

    .row
        .col-xs-12
            .page-header
                h2 Active Workshops
                    small.right #{activeWorkshops.length} total
            if activeWorkshops.length > 0
                table.table
                        thead
                            tr
                                th Start Date
                                th End Date
                                th Location
                                th #{targetUser.name.first}'s Rank
                        tbody
                            each w in activeWorkshops
                                tr
                                    td= moment(w.startDate).format("MMMM Do YYYY")
                                    td= moment(w.endDate).format("MMMM Do YYYY")
                                    td
                                        a(href="/locations/" + w.location._id)= w.location.name
                                    td.rank= helpers.getRankFromWorkshop(w, targetUser)
                                    td
                                        a.btn.btn-default(href="/workshops/" + w._id) Workshop Details
            else
                p.text-center.text-muted #{targetUser.name.first} has not yet been involved in any workshops.

    .row
        .col-xs-12
            .page-header
                h2 Past Workshops
                    small.right #{inactiveWorkshops.length} total
            if inactiveWorkshops.length > 0
                table.table
                        thead
                            tr
                                th Start Date
                                th End Date
                                th Location
                                th #{targetUser.name.first}'s Rank
                        tbody
                            each w in inactiveWorkshops
                                tr
                                    td= moment(w.startDate).format("MMMM Do YYYY")
                                    td= moment(w.endDate).format("MMMM Do YYYY")
                                    td
                                        a(href="/locations/" + w.location._id)= w.location.name
                                    td.rank= helpers.getRankFromWorkshop(w, targetUser)
            else
                p.text-center.text-muted #[b= targetUser.name.first] has not yet been involved in any finished workshops.

    .row
        .col-xs-12
            hr
            a.btn.btn-lg.btn-primary.right(href="mailto:" + targetUser.email) Email #{targetUser.name.first}
    
            if user.admin
                if user.id !== targetUser.id
                    a.btn.btn-lg.btn-info(href="/loginas?id=" + targetUser.id) Login as #{targetUser.name.first}
                a.btn.btn-lg.btn-danger(href="/users/" + targetUser.email + "/edit") Edit #{targetUser.name.first}
